<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <!-- Custom Style -->
	<link rel="stylesheet" type="text/css" href="../boot-style.css">
	<link rel="stylesheet" type="text/css" href="wordHero-style.css">
    <title>Word Hero</title>
	<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>

  </head>
  <body>
  
    
	
	<div class="container-fluid">
        <div class="row" id="header">
            <h1>Word Hero</h1>
        </div>
        <div class="row">   
			<div class="buffer">
			</div>
			<div id="gamespace">		
					
					<div id="one">
					</div>
					
					<div id="two">
					</div>
					
					<div class="fall">
					</div>
					
					<div class="fall">
					</div>
					
					<div class="fall">
					</div>
					
					<div class="fall">
					</div>
					
					<div class="fall">
					</div>
					
					<div class="fall">
					</div>
					
					<div id='pointer'>
					</div>			

					<div id='paddle'>
					</div>
					
			</div>
			<div class="buffer">
			</div>
        </div>

	
	</div>
    
    <script> 
		//falling objects that are words that you catch, they need to meet certain requirements. That can pop up one at a time below or be a part of a quest to catch X number of [prepositions, nouns, country names, historical events, authors, book titles]
		
		
		
		$(window).on('load', function(){
		
		//it doesn't matter, nona this matters
			$('#one').data("val", {
				name: 'Achilles',
				touched: false
				});
			$('#two').data("val",{
				name: 'Ajax',
				touched: false
				});
			
			setTimeout(function(){
				topToBot($('#one'));
			}, 1000);
			console.log($('#two').data());

			setBoxes();
			
			topToBot($('#two'));
		//	
			
			
		});
		
		function setBoxes(){
			let iVal = 0;
			$('.fall').each(function(){
				$(this).css({
					width: '9vw',
					height: '3vw',
					position: 'absolute', 
					border: '1px solid black',
					background: 'yellow',
					left: 1+(9.5*iVal) +'vw',
					'border-radius': '5px'
					
				});
				iVal++;
			});
		}
		
		
		
		//ensure animation goes from top to bottom of gamespace
		function topToBot(elem){
			
			var bodyHeight = $('#gamespace').height();
			var elemOffset = elem.offset().top;
			var fullLength = bodyHeight;
			
			$(elem).animate({
				top: fullLength			
			}, 3000, 'linear', function(){				
				
				//probs don't need this but sweet little loop here
				elem.css({
					top: '0'
				});
				
				elem.data("val").touched = false; //reset a data value so we can reuse this fool
				topToBot(elem);
				//end of sweet little loop
			});
			
			var tempLoop = setInterval(function(){
				compare($('#paddle'), elem);
			}, 100);
			
		}
		
		//jQuery - mine
		function compare(obj1, obj2){			
			var oneLeft = obj1.offset().left;
			var oneRight = oneLeft + obj1.width();
			var oneTop = obj1.offset().top;
			var oneBot = oneTop + obj1.height();			
			
			var twoLeft = obj2.offset().left;
			var twoRight = twoLeft + obj2.width();
			var twoTop = obj2.offset().top;
			var twoBot = twoTop + obj2.height();				
	
			if(oneBot > twoTop && oneTop < twoBot){
				if(oneLeft < twoRight && oneRight > twoLeft){
					//console.log('collision ');	
					
					//way to only 'touch' it once
					//what do we do if they touch?
					if(!obj2.data("val").touched){
						console.log(obj2.data("val").touched);
						obj2.data("val").touched = true;
					}
					
				}
			}			
		}
		
		

		
		function comparePositions(p1, p2){
			var x1 = p1[0] < p2[0] ? p1 : p2;
			var x2 = p1[0] < p2[0] ? p2: p1;
			return x1[1] > x2[0] || x1[0] === x2[0] ? true : false;
		}
		
		
		
/*		
	   //jsfiddle example to instance and drop multiple objects at a time
		function dropObjs(){			
			var $objs = $(), qt = 20;			
			for(var i=0; i<qt; i++){
				var $obj = $('<div class="objects"></div>');
				$obj.css({
					'left': (Math.random() * $('#gamespace').width()) + 'px',
					'top': (-Math.random() * $('#gamespace').height()) + 'px'
				});				
				$objs = $objs.add($obj);
			}
			
			$('#gamespace').prepend($objs);
			
			$objs.animate({
				top:'500px', 
				opacity: '0'
			}, Math.random() + 5000, function(){
				$(this).remove();
				if(--qt < 1){
					dropObjs();
				}				
			});		
		}
*/   
	 	//follow mouse pointer in container script.
	   var mouseX=0, mouseY=0, limitX = $('#gamespace').width(), limitY=$('#gamespace').height();
	   var xp = 0, yp = 0;
	   $(document).on('mousemove', function(e){
			var offset = $('#gamespace').offset();
			mouseX = Math.min(e.pageX - offset.left, limitX);
			mouseY = Math.min(e.pageY - offset.top, limitY);
			if(mouseX < 0) mouseX = 0;
			if(mouseY < 0) mouseY = 0;		
	   });
	   
	   
	   var loop = setInterval(function(){
			var point = document.getElementById('pointer');
			xp += (mouseX - xp)/10;
			yp += (mouseY - yp)/10;
			$('#pointer').css({left:xp, top:yp});

			var twoBox = document.getElementById('two');
			//compare($('#pointer'), $('#one'));

	   }, 20);
	   
	   
	   
	  
    </script>
    
    
    <script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  </body>  
 </html>